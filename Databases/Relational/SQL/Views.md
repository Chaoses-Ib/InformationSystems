# Views
视图是从一个或几个基本表（或视图）导出的虚表。数据库中只存放视图的定义，而不存放视图对应的数据。

- ```sql
  CREATE VIEW 视图名 [(列名, …)]
  AS 子查询
  [WITH CHECK OPTION]
  ```
- ```sql
  DROP VIEW 视图名 [CASCADE]
  ```

<br />

- 行列子集视图

  单个基本表去掉某些行和列，保留主码，所产生的视图。

  “目前多数关系数据库系统对行列子集视图的查询均能进行正确转换，但对非行列子集视图的查询就不一定能做转换了。”可以用临时派生表替代。

  “目前，各个关系数据库管理系统一般都只允许对行列子集视图进行更新。”

- 分组视图

  查询语句含有聚集函数或 `GROUP BY` 的视图。

- `WITH CHECK OPTION`

  对视图进行插入、更新和删除时，会自动应用 `WHERE` 条件。

DB2 规定：
1. 若视图是由两个以上基本表导出的，则此视图不允许更新。
2. 若视图的字段来自字段表达式或常数，则不允许对此视图执行 `INSERT` 和 `UPDATE`  
操作，但允许执行 `DELETE` 操作。
3. 若视图的字段来自聚集函数，则此视图不允许更新。
4. 若视图定义中含有 `GROUP BY` 子句，则此视图不允许更新。
5. 若视图定义中含有 `DISTINCT` 短语，则此视图不允许更新。
6. 若视图定义中有嵌套查询，并且内层查询的 FROM 子句中涉及的表也是导出该视图的基本表，则此视图不允许更新。
7. 一个不允许更新的视图上定义的视图也不允许更新。

[为什么mysql中很少见到使用视图功能？ - 知乎](https://www.zhihu.com/question/26614127)

[为什么要创建数据库视图？ - 知乎](https://www.zhihu.com/question/27641331)
- “create view尤其对于多表关联不一定会降低查询效率，view 建立后数据库内部会相应处理，建立相对应的查询路径，反而有利于查询效率”

[sql之浅谈视图的作用 - 简书](https://www.jianshu.com/p/6a2c7407be4c)

## 视图的作用
- 简化用户操作
- 使用户能以多种角度看待同一数据
- 对重构数据库提供了一定程度的逻辑独立性
- 对机密数据提供安全保护
- 可以更清晰地表达查询

简化操作，清晰查询，多种角度，逻辑独立，安全保护